## 為什麼 Email 不寫在主 Backend

- 解耦合：使用第三方服務可進一步提升送達率與監控能力
- 可靠性：獨立服務可專注於重試、排程、監控，提升穩定性
- 擴充性：不同業務模組可共用同一 Email Service，減少重複開發

## 驗證碼發送流程

1. 使用者請求驗證碼（註冊、重設密碼）
2. Backend 生成一次性驗證碼
3. 驗證碼存入暫存資料庫（Redis）並設定 TTL
4. 透過 SMTP 或第三方 API 發送
5. 使用者輸入驗證碼，Backend 驗證並完成流程

## 重試策略

- 每個 IP 和 裝置綁定在一起(或其他多種來源的組合)，每分鐘限制發送次數（例如 5 次），雖然可以被偽造，但避免用戶濫用也要防止其他人被誤殺
- 最好能根據使用者行為（如頻繁請求）動態調整限制，並提供適當的錯誤訊息引導使用者

## 模板設計

- 動態參數：如驗證碼、使用者名稱、連結、安全資訊
- 版本管理：模板更新需可回溯，避免破壞舊流程
- 一致性：品牌識別、排版統一，提升使用者體驗

## 使用個人網域

- 增加信任度：減少被標記為垃圾郵件的風險
- 管理方便：統一管理郵件發送和回覆地址
- 品牌識別：強化品牌形象和認知度

## 環境變數

- 防止敏感資訊洩漏，直接在程式碼中硬編碼密碼是非常危險的行為
- 使用環境變數（如 .env 文件）來存儲 SMTP 密碼和其他敏感資訊

## 結論

到目前幾乎沒有免費的網域可以用來發送郵件，為了順利發送郵件，使用個人網域是必要的選擇。
雖然有成本，但能提升專業形象和信任度，對於實際專案來說是值得的投資

## 外部專案

[email-send-backend 儲存庫](https://github.com/LingoNext/email-send-backend)
